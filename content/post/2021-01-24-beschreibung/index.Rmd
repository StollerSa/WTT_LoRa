---
title: "Device Parameter"
author: "Stoller Sandro"
date: '2021-01-24'
categories:  ["R"]
tags: ["R Markdown"]
---

# Server connection
```{r serverconetion, message=FALSE, warning=FALSE, include=FALSE}
library(jsonlite)
library(tidyverse)
#daten vom server laden
mydata <- fromJSON("https://srv-lab-t-430.zhaw.ch/wildtiertracking/api/parsed-data/json") 
# zeiten formatiern
mydata$Time <- as.POSIXct(strptime(mydata$Time, format = '%Y-%m-%dT%H:%M:%S'), format = '%Y-%m-%dT%H:%M:%S')
# die Information des Device in die subgruppe locations anhÃ¤ngen.
mydata$Payload$Content$Device <- mydata$DeviceEUI
```

# Grafische Darstellung des Lebenszyklus von F08
```{r Lifecycle F8, echo=FALSE, message=FALSE, warning=FALSE}
locations <- mydata %>%  
              dplyr::filter(Payload$Type == "Location") %>%
              group_by(DeviceEUI) 
status <- mydata %>% 
              dplyr::filter((Payload$Type =="Status")) %>%
              dplyr::filter(Time >= "2021-01-01 00:00:00")
    
  
    ggplot(status, aes(x = as.Date(Time), y = Payload$Content$BatteryVoltage, colour = DeviceEUI)) +
    geom_point() +
      geom_line()+
    facet_wrap( ~ DeviceEUI)+
      theme(legend.position = "none",panel.background = element_blank(),
              panel.grid.major = element_line(size = 0.5, linetype = 'solid',
                                  colour = "gray"))+
      labs(title="Plot der Batteriespannung",
          x ="Datum", y = "Batteriespannung")

  
```

